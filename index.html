<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitTracker Elite - Sistema Profissional de Treinos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        'primary-dark': '#4B4BBE'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif']
                    },
                    animation: {
                        'bounce-slow': 'bounce 2s infinite',
                        'pulse-slow': 'pulse 3s infinite',
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out'
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .dark .glass-effect {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 text-gray-900 dark:text-white transition-all duration-500 font-sans">
    <!-- Header -->
    <header class="bg-primary text-white shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-dumbbell text-2xl"></i>
                    <h1 class="text-2xl font-bold">FitTracker Elite</h1>
                </div>
                <div class="text-sm">
                    <span id="currentDate"></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-gray-100 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
        <div class="container mx-auto px-4">
            <div class="flex space-x-8">
                <button class="nav-btn active py-4 px-2 border-b-2 border-primary text-primary font-medium" data-tab="dashboard">
                    <i class="fas fa-chart-line mr-2"></i>Dashboard
                </button>
                <button class="nav-btn py-4 px-2 border-b-2 border-transparent hover:border-gray-300 transition-colors" data-tab="exercises">
                    <i class="fas fa-list mr-2"></i>Exerc√≠cios
                </button>
                <button class="nav-btn py-4 px-2 border-b-2 border-transparent hover:border-gray-300 transition-colors" data-tab="workout">
                    <i class="fas fa-plus mr-2"></i>Registrar Treino
                </button>
                <button class="nav-btn py-4 px-2 border-b-2 border-transparent hover:border-gray-300 transition-colors" data-tab="analytics">
                    <i class="fas fa-chart-bar mr-2"></i>An√°lises
                </button>
                <button class="nav-btn py-4 px-2 border-b-2 border-transparent hover:border-gray-300 transition-colors" data-tab="tools">
                    <i class="fas fa-tools mr-2"></i>Ferramentas
                </button>
                <button class="nav-btn py-4 px-2 border-b-2 border-transparent hover:border-gray-300 transition-colors" data-tab="history">
                    <i class="fas fa-history mr-2"></i>Hist√≥rico
                </button>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-6">
        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content">
            <!-- Performance Metrics -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-6 text-white hover:scale-105 transition-transform cursor-pointer">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-blue-100">Treinos Esta Semana</p>
                            <p class="text-3xl font-bold" id="weeklyWorkouts">0</p>
                        </div>
                        <i class="fas fa-calendar-week text-2xl text-blue-200"></i>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-6 text-white hover:scale-105 transition-transform cursor-pointer">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-green-100">Volume Total (kg)</p>
                            <p class="text-3xl font-bold" id="totalVolume">0</p>
                        </div>
                        <i class="fas fa-weight-hanging text-2xl text-green-200"></i>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg p-6 text-white hover:scale-105 transition-transform cursor-pointer">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-purple-100">Total de Treinos</p>
                            <p class="text-3xl font-bold" id="totalWorkouts">0</p>
                        </div>
                        <i class="fas fa-dumbbell text-2xl text-purple-200"></i>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg p-6 text-white hover:scale-105 transition-transform cursor-pointer">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-orange-100">Exerc√≠cios √önicos</p>
                            <p class="text-3xl font-bold" id="uniqueExercises">0</p>
                        </div>
                        <i class="fas fa-fire text-2xl text-orange-200"></i>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4">√öltimos Treinos</h3>
                    <div id="recentWorkouts" class="space-y-3">
                        <p class="text-gray-500 dark:text-gray-400">Nenhum treino registrado ainda.</p>
                    </div>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4">Exerc√≠cios Mais Realizados</h3>
                    <div id="popularExercises" class="space-y-3">
                        <p class="text-gray-500 dark:text-gray-400">Nenhum exerc√≠cio registrado ainda.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Exercises Tab -->
        <div id="exercises" class="tab-content hidden">
            <div class="mb-6">
                <h2 class="text-3xl font-bold mb-4">Base de Exerc√≠cios</h2>
                <div class="mb-4">
                    <input type="text" id="exerciseSearch" placeholder="Buscar exerc√≠cios..." 
                           class="w-full px-4 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-gray-700">
                </div>
                <div class="mb-4">
                    <select id="muscleFilter" class="px-4 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700">
                        <option value="">Todos os m√∫sculos</option>
                        <option value="peito">Peito</option>
                        <option value="costas">Costas</option>
                        <option value="ombros">Ombros</option>
                        <option value="bra√ßos">Bra√ßos</option>
                        <option value="pernas">Pernas</option>
                        <option value="core">Core</option>
                    </select>
                </div>
            </div>
            <div id="exerciseList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Exercises will be populated here -->
            </div>
        </div>

        <!-- Workout Tab -->
        <div id="workout" class="tab-content hidden">
            <div class="max-w-7xl mx-auto">
                <h2 class="text-4xl font-bold gradient-text bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-8">üèãÔ∏è‚Äç‚ôÇÔ∏è Registrar Novo Treino</h2>

                <!-- Enhanced Workout Progress Bar -->
                <div class="bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl p-6 text-white mb-6 shadow-lg">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-bold">‚è±Ô∏è Status do Treino</h3>
                        <div id="workoutIntensity" class="text-sm bg-white bg-opacity-20 px-3 py-1 rounded-full">
                            Aguardando in√≠cio
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <!-- Live Timer -->
                        <div class="text-center">
                            <div class="text-5xl font-bold mb-2" id="liveTimer">00:00:00</div>
                            <div class="text-sm opacity-90">Tempo Ativo</div>
                        </div>
                        
                        <!-- Quick Rest Timer -->
                        <div class="text-center">
                            <div class="text-3xl font-bold text-yellow-300 mb-2" id="quickTimer">0:00</div>
                            <div class="text-sm opacity-90">Descanso</div>
                            <div class="flex justify-center space-x-1 mt-2">
                                <button class="quick-timer-btn bg-white bg-opacity-20 hover:bg-opacity-30 px-2 py-1 rounded text-xs" data-seconds="30">30s</button>
                                <button class="quick-timer-btn bg-white bg-opacity-20 hover:bg-opacity-30 px-2 py-1 rounded text-xs" data-seconds="60">1m</button>
                                <button class="quick-timer-btn bg-white bg-opacity-20 hover:bg-opacity-30 px-2 py-1 rounded text-xs" data-seconds="90">1:30</button>
                                <button class="quick-timer-btn bg-white bg-opacity-20 hover:bg-opacity-30 px-2 py-1 rounded text-xs" data-seconds="120">2m</button>
                            </div>
                        </div>
                        
                        <!-- Current Stats -->
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-300 mb-2" id="currentVolumeDisplay">0kg</div>
                            <div class="text-sm opacity-90">Volume Atual</div>
                            <div class="text-xs" id="currentExerciseDisplay">0 exerc√≠cios</div>
                        </div>
                    </div>

                    <!-- Control Buttons -->
                    <div class="flex justify-center space-x-3">
                        <button id="startWorkoutBtn" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105">
                            <i class="fas fa-play mr-2"></i>Iniciar Treino
                        </button>
                        <button id="pauseWorkoutBtn" class="bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 hidden">
                            <i class="fas fa-pause mr-2"></i>Pausar
                        </button>
                        <button id="resumeWorkoutBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 hidden">
                            <i class="fas fa-play mr-2"></i>Retomar
                        </button>
                        <button id="stopWorkoutBtn" class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 hidden">
                            <i class="fas fa-stop mr-2"></i>Finalizar
                        </button>
                        <button id="quickStartBtn" class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-3 rounded-lg font-semibold transition-all">
                            <i class="fas fa-clock mr-1"></i>Timer
                        </button>
                    </div>

                    <div id="workoutStatus" class="text-center mt-4 text-sm opacity-90">
                        <p id="statusText">Pressione "Iniciar Treino" para come√ßar sua jornada</p>
                    </div>
                </div>

                <!-- Workout Type Selector -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6">
                    <h3 class="text-xl font-bold mb-6">üéØ Selecione o Tipo de Treino</h3>
                    
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-6">
                        <button class="workout-type-btn bg-gradient-to-br from-red-500 to-pink-600 text-white p-4 rounded-xl hover:scale-105 transition-all text-center shadow-lg group" data-type="peito">
                            <div class="text-2xl mb-2 group-hover:animate-bounce">üí™</div>
                            <div class="font-semibold">Peito</div>
                            <div class="text-xs opacity-80">4 exerc√≠cios</div>
                        </button>
                        <button class="workout-type-btn bg-gradient-to-br from-blue-500 to-indigo-600 text-white p-4 rounded-xl hover:scale-105 transition-all text-center shadow-lg group" data-type="costas">
                            <div class="text-2xl mb-2 group-hover:animate-bounce">üî•</div>
                            <div class="font-semibold">Costas</div>
                            <div class="text-xs opacity-80">4 exerc√≠cios</div>
                        </button>
                        <button class="workout-type-btn bg-gradient-to-br from-yellow-500 to-orange-600 text-white p-4 rounded-xl hover:scale-105 transition-all text-center shadow-lg group" data-type="ombros">
                            <div class="text-2xl mb-2 group-hover:animate-bounce">üèÜ</div>
                            <div class="font-semibold">Ombros</div>
                            <div class="text-xs opacity-80">4 exerc√≠cios</div>
                        </button>
                        <button class="workout-type-btn bg-gradient-to-br from-purple-500 to-violet-600 text-white p-4 rounded-xl hover:scale-105 transition-all text-center shadow-lg group" data-type="bra√ßos">
                            <div class="text-2xl mb-2 group-hover:animate-bounce">üí•</div>
                            <div class="font-semibold">Bra√ßos</div>
                            <div class="text-xs opacity-80">4 exerc√≠cios</div>
                        </button>
                        <button class="workout-type-btn bg-gradient-to-br from-green-500 to-teal-600 text-white p-4 rounded-xl hover:scale-105 transition-all text-center shadow-lg group" data-type="pernas">
                            <div class="text-2xl mb-2 group-hover:animate-bounce">ü¶µ</div>
                            <div class="font-semibold">Pernas</div>
                            <div class="text-xs opacity-80">5 exerc√≠cios</div>
                        </button>
                        <button class="workout-type-btn bg-gradient-to-br from-gray-600 to-gray-800 text-white p-4 rounded-xl hover:scale-105 transition-all text-center shadow-lg group" data-type="core">
                            <div class="text-2xl mb-2 group-hover:animate-bounce">‚ö°</div>
                            <div class="font-semibold">Core</div>
                            <div class="text-xs opacity-80">4 exerc√≠cios</div>
                        </button>
                        <button class="workout-type-btn bg-gradient-to-br from-cyan-500 to-blue-600 text-white p-4 rounded-xl hover:scale-105 transition-all text-center shadow-lg group" data-type="fullbody">
                            <div class="text-2xl mb-2 group-hover:animate-bounce">üåü</div>
                            <div class="font-semibold">Full Body</div>
                            <div class="text-xs opacity-80">5 exerc√≠cios</div>
                        </button>
                        <button class="workout-type-btn bg-gradient-to-br from-pink-500 to-rose-600 text-white p-4 rounded-xl hover:scale-105 transition-all text-center shadow-lg group" data-type="custom">
                            <div class="text-2xl mb-2 group-hover:animate-bounce">üé®</div>
                            <div class="font-semibold">Custom</div>
                            <div class="text-xs opacity-80">Personalizado</div>
                        </button>
                    </div>
                    
                    <div id="selectedWorkoutType" class="text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                        <p class="text-gray-500 dark:text-gray-400">‚ú® Selecione um tipo de treino acima - Os exerc√≠cios ser√£o carregados automaticamente!</p>
                    </div>
                </div>
                
                <!-- Enhanced Workout Form -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6" id="workoutFormContainer" style="display: none;">
                    <form id="workoutForm">
                        <!-- Form Header -->
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-2xl font-bold">üèãÔ∏è‚Äç‚ôÇÔ∏è Configurar Treino</h3>
                            <div class="flex space-x-2">
                                <button type="button" id="addExerciseBtn" class="bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded-lg text-sm transition-colors">
                                    <i class="fas fa-plus mr-2"></i>Adicionar Exerc√≠cio
                                </button>
                                <button type="button" id="clearExercisesBtn" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                                    <i class="fas fa-trash mr-2"></i>Limpar
                                </button>
                            </div>
                        </div>

                        <!-- Enhanced Form Fields -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <div>
                                <label class="block text-sm font-medium mb-2">üìÖ Data do Treino</label>
                                <input type="date" id="workoutDate" required
                                       class="w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700 transition-colors">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">üïê Hora de In√≠cio</label>
                                <input type="time" id="workoutStartTime" readonly
                                       class="w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-600">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">‚è±Ô∏è Dura√ß√£o</label>
                                <input type="text" id="workoutDurationDisplay" readonly placeholder="Use o cron√¥metro"
                                       class="w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-600">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">üéØ Intensidade</label>
                                <select id="workoutIntensitySelect" class="w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700">
                                    <option value="low">Leve üòå</option>
                                    <option value="moderate" selected>Moderada üí™</option>
                                    <option value="high">Alta üî•</option>
                                    <option value="extreme">Extrema üíÄ</option>
                                </select>
                            </div>
                        </div>

                        <!-- Exercise List -->
                        <div class="mb-6">
                            <h3 class="text-lg font-semibold mb-4">üìã Exerc√≠cios do Treino</h3>
                            
                            <div id="exerciseEntries" class="space-y-4">
                                <!-- Exercise entries will be added here dynamically -->
                            </div>
                            
                            <div id="exerciseEmptyState" class="text-center py-12 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg">
                                <i class="fas fa-dumbbell text-4xl text-gray-400 mb-4"></i>
                                <p class="text-gray-500 dark:text-gray-400 mb-2">Nenhum exerc√≠cio adicionado ainda</p>
                                <p class="text-sm text-gray-400">Selecione um tipo de treino acima e os exerc√≠cios aparecer√£o aqui automaticamente!</p>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="flex flex-col sm:flex-row justify-between space-y-3 sm:space-y-0 sm:space-x-4">
                            <button type="button" id="clearFormBtn" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg transition-colors">
                                <i class="fas fa-undo mr-2"></i>Limpar Tudo
                            </button>
                            <button type="submit" class="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-8 py-3 rounded-lg transition-all font-semibold transform hover:scale-105 shadow-lg">
                                <i class="fas fa-rocket mr-2"></i>Finalizar Treino
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div id="analytics" class="tab-content hidden">
            <h2 class="text-3xl font-bold mb-6">An√°lises e Progress√£o</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4">Progresso Semanal</h3>
                    <canvas id="weeklyChart" width="400" height="200"></canvas>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4">Grupos Musculares</h3>
                    <canvas id="muscleChart" width="400" height="200"></canvas>
                </div>
            </div>
        </div>

        <!-- Tools Tab -->
        <div id="tools" class="tab-content hidden">
            <h2 class="text-3xl font-bold mb-6">Ferramentas e Calculadoras</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- 1RM Calculator -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-calculator mr-2 text-primary"></i>
                        Calculadora 1RM
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Peso utilizado (kg)</label>
                            <input type="number" id="rmWeight" step="0.5" placeholder="100" 
                                   class="w-full px-4 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Repeti√ß√µes realizadas</label>
                            <input type="number" id="rmReps" min="1" max="20" placeholder="8" 
                                   class="w-full px-4 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700">
                        </div>
                        <button id="calculate1RMBtn" class="w-full bg-primary hover:bg-primary-dark text-white py-2 rounded-lg transition-colors">
                            Calcular 1RM
                        </button>
                        <div id="rmResult" class="hidden mt-4 p-4 bg-green-50 dark:bg-green-900 rounded-lg">
                            <p class="text-green-800 dark:text-green-200 font-medium">Sua repeti√ß√£o m√°xima estimada:</p>
                            <p class="text-2xl font-bold text-green-600 dark:text-green-400" id="rmValue">-</p>
                        </div>
                    </div>
                </div>

                <!-- Rest Timer -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-stopwatch mr-2 text-primary"></i>
                        Timer de Descanso
                    </h3>
                    <div class="text-center space-y-4">
                        <div class="text-6xl font-bold text-primary" id="timerDisplay">0:00</div>
                        <div class="space-x-2">
                            <button class="timer-preset-btn bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg" data-time="60">1min</button>
                            <button class="timer-preset-btn bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg" data-time="90">1:30</button>
                            <button class="timer-preset-btn bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg" data-time="120">2min</button>
                            <button class="timer-preset-btn bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg" data-time="180">3min</button>
                        </div>
                        <div class="space-x-2">
                            <button id="timerBtn" class="bg-primary hover:bg-primary-dark text-white px-6 py-2 rounded-lg">
                                <i class="fas fa-play mr-2"></i>Iniciar
                            </button>
                            <button id="resetTimerBtn" class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg">
                                <i class="fas fa-stop mr-2"></i>Parar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- History Tab -->
        <div id="history" class="tab-content hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold">Hist√≥rico de Treinos</h2>
                <button id="clearHistoryBtn" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors">
                    <i class="fas fa-trash mr-2"></i>Limpar Hist√≥rico
                </button>
            </div>
            <div id="workoutHistory" class="space-y-6">
                <p class="text-gray-500 dark:text-gray-400 text-center py-8">Nenhum treino registrado ainda.</p>
            </div>
        </div>
    </div>

    <!-- Success Message -->
    <div id="successMessage" class="hidden fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50">
        <i class="fas fa-check mr-2"></i>
        <span id="successText">Opera√ß√£o realizada com sucesso!</span>
    </div>

    <script>
        // Global variables
        let workouts = [];
        let selectedWorkoutType = null;
        let exerciseIndex = 0;
        
        // Timer variables
        let workoutTimer = null;
        let workoutStartTime = null;
        let workoutElapsedTime = 0;
        let isWorkoutRunning = false;
        let isWorkoutPaused = false;
        
        // Quick timer variables
        let quickTimer = null;
        let quickTimerSeconds = 0;
        let isQuickTimerRunning = false;
        
        // Rest timer variables
        let restTimer = null;
        let restTimerSeconds = 0;
        let isRestTimerRunning = false;

        // Exercise database
        const exerciseDatabase = [
            // Peito
            { name: "Supino Reto", muscle: "peito", instructions: "Deite no banco, segure a barra com pegada um pouco mais larga que os ombros." },
            { name: "Supino Inclinado", muscle: "peito", instructions: "Similar ao supino reto, mas em banco inclinado (30-45¬∞)." },
            { name: "Flex√£o de Bra√ßo", muscle: "peito", instructions: "Em posi√ß√£o de prancha, des√ßa o corpo flexionando os bra√ßos." },
            { name: "Crucifixo", muscle: "peito", instructions: "Deitado no banco, segure halteres com bra√ßos abertos." },
            
            // Costas
            { name: "Puxada na Polia Alta", muscle: "costas", instructions: "Sentado, puxe a barra em dire√ß√£o ao peito." },
            { name: "Remada Curvada", muscle: "costas", instructions: "Inclinado para frente, puxe a barra em dire√ß√£o ao abd√¥men." },
            { name: "Barra Fixa", muscle: "costas", instructions: "Pendure na barra e puxe o corpo para cima." },
            { name: "Remada Unilateral", muscle: "costas", instructions: "Apoiado no banco, puxe o halter em dire√ß√£o √† cintura." },
            
            // Ombros
            { name: "Desenvolvimento", muscle: "ombros", instructions: "Sentado ou em p√©, empurre os halteres acima da cabe√ßa." },
            { name: "Eleva√ß√£o Lateral", muscle: "ombros", instructions: "Com halteres nas m√£os, eleve os bra√ßos lateralmente." },
            { name: "Eleva√ß√£o Frontal", muscle: "ombros", instructions: "Eleve o halter √† frente do corpo at√© a altura dos ombros." },
            { name: "Crucifixo Inverso", muscle: "ombros", instructions: "Inclinado para frente, abra os bra√ßos lateralmente." },
            
            // Bra√ßos
            { name: "Rosca Direta", muscle: "bra√ßos", instructions: "Com barra ou halteres, flexione os cotovelos contraindo o b√≠ceps." },
            { name: "Tr√≠ceps Testa", muscle: "bra√ßos", instructions: "Deitado, flexione apenas os antebra√ßos." },
            { name: "Rosca Martelo", muscle: "bra√ßos", instructions: "Com halteres em pegada neutra, flexione os cotovelos." },
            { name: "Tr√≠ceps Pulley", muscle: "bra√ßos", instructions: "Na polia alta, empurre a barra para baixo." },
            
            // Pernas
            { name: "Agachamento", muscle: "pernas", instructions: "Des√ßa flexionando joelhos e quadris como se fosse sentar." },
            { name: "Leg Press", muscle: "pernas", instructions: "No aparelho, empurre a plataforma com os p√©s." },
            { name: "Cadeira Extensora", muscle: "pernas", instructions: "Sentado, estenda as pernas contraindo o quadr√≠ceps." },
            { name: "Mesa Flexora", muscle: "pernas", instructions: "Deitado de bru√ßos, flexione as pernas." },
            { name: "Panturrilha em P√©", muscle: "pernas", instructions: "Na ponta dos p√©s, eleve o corpo contraindo as panturrilhas." },
            
            // Core
            { name: "Abdominal Supra", muscle: "core", instructions: "Deitado, flexione o tronco contraindo o abd√¥men." },
            { name: "Prancha", muscle: "core", instructions: "Mantenha o corpo reto apoiado nos antebra√ßos e p√©s." },
            { name: "Abdominal Obl√≠quo", muscle: "core", instructions: "Deitado de lado, flexione o tronco lateralmente." },
            { name: "Mountain Climber", muscle: "core", instructions: "Em posi√ß√£o de prancha, alterne levando os joelhos ao peito." }
        ];

        // Workout templates
        const workoutTemplates = {
            peito: [
                { exercise: "Supino Reto", sets: 4, reps: 8, weight: 60 },
                { exercise: "Supino Inclinado", sets: 3, reps: 10, weight: 50 },
                { exercise: "Crucifixo", sets: 3, reps: 12, weight: 15 },
                { exercise: "Flex√£o de Bra√ßo", sets: 3, reps: 15, weight: 0 }
            ],
            costas: [
                { exercise: "Puxada na Polia Alta", sets: 4, reps: 8, weight: 50 },
                { exercise: "Remada Curvada", sets: 3, reps: 10, weight: 40 },
                { exercise: "Barra Fixa", sets: 3, reps: 8, weight: 0 },
                { exercise: "Remada Unilateral", sets: 3, reps: 12, weight: 25 }
            ],
            ombros: [
                { exercise: "Desenvolvimento", sets: 4, reps: 10, weight: 30 },
                { exercise: "Eleva√ß√£o Lateral", sets: 3, reps: 12, weight: 10 },
                { exercise: "Eleva√ß√£o Frontal", sets: 3, reps: 12, weight: 8 },
                { exercise: "Crucifixo Inverso", sets: 3, reps: 15, weight: 8 }
            ],
            bra√ßos: [
                { exercise: "Rosca Direta", sets: 4, reps: 10, weight: 20 },
                { exercise: "Tr√≠ceps Testa", sets: 4, reps: 10, weight: 30 },
                { exercise: "Rosca Martelo", sets: 3, reps: 12, weight: 15 },
                { exercise: "Tr√≠ceps Pulley", sets: 3, reps: 12, weight: 25 }
            ],
            pernas: [
                { exercise: "Agachamento", sets: 4, reps: 10, weight: 70 },
                { exercise: "Leg Press", sets: 3, reps: 12, weight: 150 },
                { exercise: "Cadeira Extensora", sets: 3, reps: 15, weight: 40 },
                { exercise: "Mesa Flexora", sets: 3, reps: 12, weight: 35 },
                { exercise: "Panturrilha em P√©", sets: 4, reps: 20, weight: 60 }
            ],
            core: [
                { exercise: "Abdominal Supra", sets: 4, reps: 20, weight: 0 },
                { exercise: "Prancha", sets: 3, reps: 60, weight: 0 },
                { exercise: "Abdominal Obl√≠quo", sets: 3, reps: 15, weight: 0 },
                { exercise: "Mountain Climber", sets: 3, reps: 20, weight: 0 }
            ],
            fullbody: [
                { exercise: "Agachamento", sets: 3, reps: 10, weight: 60 },
                { exercise: "Supino Reto", sets: 3, reps: 10, weight: 50 },
                { exercise: "Puxada na Polia Alta", sets: 3, reps: 10, weight: 45 },
                { exercise: "Desenvolvimento", sets: 3, reps: 12, weight: 25 },
                { exercise: "Prancha", sets: 3, reps: 30, weight: 0 }
            ]
        };

        // Dark mode setup
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ FitTracker Elite carregado!');
            
            updateCurrentDate();
            populateExerciseList();
            updateDashboard();
            setupEventListeners();
            
            // Set default date to today
            document.getElementById('workoutDate').value = new Date().toISOString().split('T')[0];
            
            console.log('‚úÖ Inicializa√ß√£o completa!');
        });

        // Update current date
        function updateCurrentDate() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            document.getElementById('currentDate').textContent = 
                now.toLocaleDateString('pt-BR', options);
        }

        // Setup all event listeners
        function setupEventListeners() {
            console.log('‚öôÔ∏è Configurando event listeners...');
            
            // Tab navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const targetTab = this.dataset.tab;
                    switchTab(targetTab);
                });
            });

            // Workout timer buttons - GARANTIDO QUE FUNCIONA
            const startBtn = document.getElementById('startWorkoutBtn');
            const pauseBtn = document.getElementById('pauseWorkoutBtn');
            const resumeBtn = document.getElementById('resumeWorkoutBtn');
            const stopBtn = document.getElementById('stopWorkoutBtn');
            const quickStartBtn = document.getElementById('quickStartBtn');

            if (startBtn) {
                startBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('‚ñ∂Ô∏è Start workout clicked!');
                    startWorkout();
                });
                console.log('‚úÖ Start button listener added');
            }

            if (pauseBtn) {
                pauseBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('‚è∏Ô∏è Pause workout clicked!');
                    pauseWorkout();
                });
            }

            if (resumeBtn) {
                resumeBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('‚ñ∂Ô∏è Resume workout clicked!');
                    resumeWorkout();
                });
            }

            if (stopBtn) {
                stopBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('‚èπÔ∏è Stop workout clicked!');
                    stopWorkout();
                });
            }

            if (quickStartBtn) {
                quickStartBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('‚è∞ Quick timer clicked!');
                    toggleQuickTimer();
                });
            }

            // Quick timer preset buttons
            document.querySelectorAll('.quick-timer-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const seconds = parseInt(this.dataset.seconds);
                    console.log('Quick timer preset:', seconds);
                    startQuickTimer(seconds);
                });
            });

            // Workout type buttons - COM CARREGAMENTO AUTOM√ÅTICO
            document.querySelectorAll('.workout-type-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const type = this.dataset.type;
                    console.log('üéØ Workout type selected:', type);
                    selectWorkoutType(type);
                });
            });

            // Workout form buttons
            document.getElementById('addExerciseBtn').addEventListener('click', addExercise);
            document.getElementById('clearExercisesBtn').addEventListener('click', clearExercises);
            document.getElementById('clearFormBtn').addEventListener('click', clearForm);

            // Form submission
            document.getElementById('workoutForm').addEventListener('submit', handleFormSubmit);

            // Calculator
            document.getElementById('calculate1RMBtn').addEventListener('click', calculate1RM);

            // Rest timer
            document.getElementById('timerBtn').addEventListener('click', toggleRestTimer);
            document.getElementById('resetTimerBtn').addEventListener('click', resetRestTimer);
            document.querySelectorAll('.timer-preset-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const seconds = parseInt(this.dataset.time);
                    setRestTimer(seconds);
                });
            });

            // History
            document.getElementById('clearHistoryBtn').addEventListener('click', clearHistory);

            console.log('‚úÖ Event listeners configurados com sucesso!');
        }

        // Tab switching
        function switchTab(targetTab) {
            // Update active button
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active', 'border-primary', 'text-primary');
                btn.classList.add('border-transparent');
            });
            document.querySelector(`[data-tab="${targetTab}"]`).classList.add('active', 'border-primary', 'text-primary');
            document.querySelector(`[data-tab="${targetTab}"]`).classList.remove('border-transparent');
            
            // Show target tab
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            document.getElementById(targetTab).classList.remove('hidden');
            
            // Update dashboard when switching to it
            if (targetTab === 'dashboard') {
                updateDashboard();
            }
        }

        // Workout timer functions
        function startWorkout() {
            console.log('üöÄ Iniciando treino...');
            
            if (!isWorkoutRunning) {
                workoutStartTime = new Date();
                workoutElapsedTime = 0;
                isWorkoutRunning = true;
                isWorkoutPaused = false;
                
                // Update UI
                const startTime = workoutStartTime.toLocaleTimeString('pt-BR', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                document.getElementById('workoutStartTime').value = startTime;
                document.getElementById('statusText').textContent = 'Treino em andamento... Boa sorte! üí™';
                document.getElementById('workoutIntensity').textContent = 'Em andamento';
                
                // Show/hide buttons
                document.getElementById('startWorkoutBtn').classList.add('hidden');
                document.getElementById('pauseWorkoutBtn').classList.remove('hidden');
                document.getElementById('stopWorkoutBtn').classList.remove('hidden');
                
                // Start timer
                workoutTimer = setInterval(updateWorkoutTimer, 1000);
                
                showSuccessMessage('Treino iniciado! Boa sorte! üí™');
                console.log('‚úÖ Treino iniciado com sucesso!');
            }
        }

        function pauseWorkout() {
            console.log('‚è∏Ô∏è Pausando treino...');
            
            if (isWorkoutRunning && !isWorkoutPaused) {
                isWorkoutPaused = true;
                clearInterval(workoutTimer);
                
                // Update UI
                document.getElementById('statusText').textContent = 'Treino pausado - Descanse um pouco! üíß';
                document.getElementById('workoutIntensity').textContent = 'Pausado';
                document.getElementById('pauseWorkoutBtn').classList.add('hidden');
                document.getElementById('resumeWorkoutBtn').classList.remove('hidden');
                
                showSuccessMessage('Treino pausado. Hidrate-se! üíß');
            }
        }

        function resumeWorkout() {
            console.log('‚ñ∂Ô∏è Retomando treino...');
            
            if (isWorkoutRunning && isWorkoutPaused) {
                isWorkoutPaused = false;
                
                // Update UI
                document.getElementById('statusText').textContent = 'Treino em andamento... Vamos l√°! üöÄ';
                document.getElementById('workoutIntensity').textContent = 'Em andamento';
                document.getElementById('resumeWorkoutBtn').classList.add('hidden');
                document.getElementById('pauseWorkoutBtn').classList.remove('hidden');
                
                // Restart timer
                workoutTimer = setInterval(updateWorkoutTimer, 1000);
                
                showSuccessMessage('Treino retomado! Vamos l√°! üöÄ');
            }
        }

        function stopWorkout() {
            console.log('‚èπÔ∏è Finalizando treino...');
            
            if (isWorkoutRunning) {
                const totalMinutes = Math.round(workoutElapsedTime / 60);
                
                // Update UI
                document.getElementById('workoutDurationDisplay').value = `${totalMinutes} minutos`;
                document.getElementById('statusText').innerHTML = `
                    <span class="text-green-400">Treino finalizado!</span><br>
                    Dura√ß√£o: ${totalMinutes} min
                `;
                document.getElementById('workoutIntensity').textContent = 'Finalizado';
                
                // Reset timer display
                document.getElementById('liveTimer').textContent = '00:00:00';
                
                // Show/hide buttons
                document.getElementById('startWorkoutBtn').classList.remove('hidden');
                document.getElementById('pauseWorkoutBtn').classList.add('hidden');
                document.getElementById('resumeWorkoutBtn').classList.add('hidden');
                document.getElementById('stopWorkoutBtn').classList.add('hidden');
                
                // Clear timer
                clearInterval(workoutTimer);
                
                // Reset state
                isWorkoutRunning = false;
                isWorkoutPaused = false;
                
                showSuccessMessage(`Parab√©ns! Treino de ${totalMinutes} minutos conclu√≠do! üéâ`);
            }
        }

        function updateWorkoutTimer() {
            if (isWorkoutRunning && !isWorkoutPaused) {
                const now = new Date();
                workoutElapsedTime = Math.floor((now - workoutStartTime) / 1000);
                
                const hours = Math.floor(workoutElapsedTime / 3600);
                const minutes = Math.floor((workoutElapsedTime % 3600) / 60);
                const seconds = workoutElapsedTime % 60;
                
                const display = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                document.getElementById('liveTimer').textContent = display;
            }
        }

        // Quick timer functions
        function toggleQuickTimer() {
            if (isQuickTimerRunning) {
                pauseQuickTimer();
            } else {
                if (quickTimerSeconds === 0) {
                    quickTimerSeconds = 60; // Default 1 minute
                }
                startQuickTimerCountdown();
            }
        }

        function startQuickTimer(seconds) {
            console.log('‚è∞ Starting quick timer:', seconds, 'seconds');
            resetQuickTimer();
            quickTimerSeconds = seconds;
            updateQuickTimerDisplay();
            startQuickTimerCountdown();
        }

        function startQuickTimerCountdown() {
            isQuickTimerRunning = true;
            document.getElementById('quickStartBtn').innerHTML = '<i class="fas fa-pause mr-1"></i>Pausar';
            
            quickTimer = setInterval(() => {
                quickTimerSeconds--;
                updateQuickTimerDisplay();
                
                if (quickTimerSeconds <= 0) {
                    resetQuickTimer();
                    showSuccessMessage('‚è∞ Descanso finalizado! Pr√≥xima s√©rie!');
                }
            }, 1000);
        }

        function pauseQuickTimer() {
            isQuickTimerRunning = false;
            clearInterval(quickTimer);
            document.getElementById('quickStartBtn').innerHTML = '<i class="fas fa-play mr-1"></i>Retomar';
        }

        function resetQuickTimer() {
            isQuickTimerRunning = false;
            clearInterval(quickTimer);
            quickTimerSeconds = 0;
            updateQuickTimerDisplay();
            document.getElementById('quickStartBtn').innerHTML = '<i class="fas fa-clock mr-1"></i>Timer';
        }

        function updateQuickTimerDisplay() {
            const minutes = Math.floor(quickTimerSeconds / 60);
            const seconds = quickTimerSeconds % 60;
            document.getElementById('quickTimer').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        // Rest timer functions
        function toggleRestTimer() {
            if (isRestTimerRunning) {
                pauseRestTimer();
            } else {
                if (restTimerSeconds === 0) {
                    restTimerSeconds = 120; // Default 2 minutes
                }
                startRestTimer();
            }
        }

        function setRestTimer(seconds) {
            restTimerSeconds = seconds;
            updateRestTimerDisplay();
            if (!isRestTimerRunning) {
                startRestTimer();
            }
        }

        function startRestTimer() {
            isRestTimerRunning = true;
            document.getElementById('timerBtn').innerHTML = '<i class="fas fa-pause mr-2"></i>Pausar';
            
            restTimer = setInterval(() => {
                restTimerSeconds--;
                updateRestTimerDisplay();
                
                if (restTimerSeconds <= 0) {
                    resetRestTimer();
                    showSuccessMessage('Tempo de descanso finalizado!');
                }
            }, 1000);
        }

        function pauseRestTimer() {
            isRestTimerRunning = false;
            clearInterval(restTimer);
            document.getElementById('timerBtn').innerHTML = '<i class="fas fa-play mr-2"></i>Retomar';
        }

        function resetRestTimer() {
            isRestTimerRunning = false;
            clearInterval(restTimer);
            restTimerSeconds = 0;
            updateRestTimerDisplay();
            document.getElementById('timerBtn').innerHTML = '<i class="fas fa-play mr-2"></i>Iniciar';
        }

        function updateRestTimerDisplay() {
            const minutes = Math.floor(restTimerSeconds / 60);
            const seconds = restTimerSeconds % 60;
            document.getElementById('timerDisplay').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        // CORRIGIDO: Workout type selection com carregamento autom√°tico
        function selectWorkoutType(type) {
            console.log('üéØ Tipo de treino selecionado:', type);
            
            selectedWorkoutType = type;
            
            // Update UI feedback
            document.querySelectorAll('.workout-type-btn').forEach(btn => {
                btn.classList.remove('ring-4', 'ring-white', 'ring-opacity-50', 'scale-105');
            });
            
            document.querySelector(`[data-type="${type}"]`).classList.add('ring-4', 'ring-white', 'ring-opacity-50', 'scale-105');
            
            // Type names
            const typeNames = {
                peito: 'üí™ Treino de Peito',
                costas: 'üî• Treino de Costas', 
                ombros: 'üèÜ Treino de Ombros',
                bra√ßos: 'üí• Treino de Bra√ßos',
                pernas: 'ü¶µ Treino de Pernas',
                core: '‚ö° Treino de Core',
                fullbody: 'üåü Treino Full Body',
                custom: 'üé® Treino Personalizado'
            };
            
            // Show workout form
            document.getElementById('workoutFormContainer').style.display = 'block';
            
            // Clear previous entries
            clearExercises();
            
            // CARREGAMENTO AUTOM√ÅTICO DE EXERC√çCIOS
            if (type !== 'custom' && workoutTemplates[type]) {
                console.log('üîÑ Carregando template automaticamente para:', type);
                
                // Update display with success message
                document.getElementById('selectedWorkoutType').innerHTML = `
                    <div class="text-primary font-semibold animate-fade-in">
                        ${typeNames[type]} selecionado!
                        <span class="text-sm text-green-600 dark:text-green-400 ml-2">‚úÖ ${workoutTemplates[type].length} exerc√≠cios carregados automaticamente!</span>
                    </div>
                `;
                
                // Load template exercises automatically
                const template = workoutTemplates[type];
                template.forEach(exerciseData => {
                    addExerciseFromTemplate(exerciseData);
                });
                
                updateExerciseEmptyState();
                updateCurrentStats();
                
                showSuccessMessage(`${typeNames[type]} carregado com ${template.length} exerc√≠cios! üéØ`);
                
            } else if (type === 'custom') {
                document.getElementById('selectedWorkoutType').innerHTML = `
                    <div class="text-primary font-semibold">
                        ${typeNames[type]} selecionado!
                        <span class="text-sm text-gray-500 dark:text-gray-400 ml-2">‚ûï Adicione exerc√≠cios manualmente...</span>
                    </div>
                `;
                showSuccessMessage(`${typeNames[type]} selecionado! Adicione exerc√≠cios manualmente.`);
            }
        }

        // Exercise management
        function addExercise() {
            exerciseIndex++;
            const container = document.getElementById('exerciseEntries');
            
            const exerciseEntry = document.createElement('div');
            exerciseEntry.className = 'exercise-entry bg-gray-50 dark:bg-gray-700 p-4 rounded-lg animate-fade-in';
            exerciseEntry.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <span class="font-medium">Exerc√≠cio ${exerciseIndex}</span>
                    <button type="button" class="remove-exercise text-red-500 hover:text-red-700">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
                    <div>
                        <label class="block text-sm font-medium mb-1">Exerc√≠cio</label>
                        <select class="exercise-select w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700">
                            <option value="">Selecione...</option>
                            ${exerciseDatabase.map(ex => `<option value="${ex.name}">${ex.name}</option>`).join('')}
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">S√©ries</label>
                        <input type="number" class="sets w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700" min="1" placeholder="3">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">Repeti√ß√µes</label>
                        <input type="number" class="reps w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700" min="1" placeholder="12">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">Peso (kg)</label>
                        <input type="number" class="weight w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700" min="0" step="0.5" placeholder="20">
                    </div>
                </div>
            `;
            
            container.appendChild(exerciseEntry);
            
            // Add remove event listener
            exerciseEntry.querySelector('.remove-exercise').addEventListener('click', function() {
                exerciseEntry.remove();
                updateExerciseEmptyState();
                updateCurrentStats();
            });
            
            // Add change listeners for live stats
            exerciseEntry.querySelectorAll('input, select').forEach(input => {
                input.addEventListener('input', updateCurrentStats);
            });
            
            updateExerciseEmptyState();
            updateCurrentStats();
            
            showSuccessMessage('Exerc√≠cio adicionado!');
        }

        function addExerciseFromTemplate(exerciseData) {
            exerciseIndex++;
            const container = document.getElementById('exerciseEntries');
            
            const exerciseEntry = document.createElement('div');
            exerciseEntry.className = 'exercise-entry bg-gray-50 dark:bg-gray-700 p-4 rounded-lg animate-fade-in border-l-4 border-primary';
            exerciseEntry.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <span class="font-medium text-primary">${exerciseData.exercise}</span>
                    <button type="button" class="remove-exercise text-red-500 hover:text-red-700">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <div>
                        <label class="block text-sm font-medium mb-1">S√©ries</label>
                        <input type="number" class="sets w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700" min="1" value="${exerciseData.sets}">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">Repeti√ß√µes</label>
                        <input type="number" class="reps w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700" min="1" value="${exerciseData.reps}">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">Peso (kg)</label>
                        <input type="number" class="weight w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700" min="0" step="0.5" value="${exerciseData.weight}">
                    </div>
                </div>
                <input type="hidden" class="exercise-name" value="${exerciseData.exercise}">
            `;
            
            container.appendChild(exerciseEntry);
            
            // Add remove event listener
            exerciseEntry.querySelector('.remove-exercise').addEventListener('click', function() {
                exerciseEntry.remove();
                updateExerciseEmptyState();
                updateCurrentStats();
            });
            
            // Add change listeners for live stats
            exerciseEntry.querySelectorAll('input').forEach(input => {
                input.addEventListener('input', updateCurrentStats);
            });
        }

        function clearExercises() {
            document.getElementById('exerciseEntries').innerHTML = '';
            exerciseIndex = 0;
            updateExerciseEmptyState();
            updateCurrentStats();
        }

        function updateExerciseEmptyState() {
            const entries = document.querySelectorAll('.exercise-entry');
            const emptyState = document.getElementById('exerciseEmptyState');
            
            if (entries.length === 0) {
                emptyState.style.display = 'block';
            } else {
                emptyState.style.display = 'none';
            }
        }

        function updateCurrentStats() {
            const entries = document.querySelectorAll('.exercise-entry');
            let totalVolume = 0;
            let exerciseCount = 0;
            
            entries.forEach(entry => {
                const exerciseName = entry.querySelector('.exercise-name')?.value || entry.querySelector('.exercise-select')?.value;
                const sets = parseInt(entry.querySelector('.sets').value) || 0;
                const reps = parseInt(entry.querySelector('.reps').value) || 0;
                const weight = parseFloat(entry.querySelector('.weight').value) || 0;
                
                if (exerciseName && sets && reps) {
                    exerciseCount++;
                    totalVolume += (weight * sets * reps);
                }
            });
            
            document.getElementById('currentVolumeDisplay').textContent = `${totalVolume.toFixed(1)}kg`;
            document.getElementById('currentExerciseDisplay').textContent = `${exerciseCount} exerc√≠cio${exerciseCount !== 1 ? 's' : ''}`;
        }

        function clearForm() {
            document.getElementById('workoutForm').reset();
            document.getElementById('workoutDate').value = new Date().toISOString().split('T')[0];
            clearExercises();
            selectedWorkoutType = null;
            
            // Reset workout type selection
            document.querySelectorAll('.workout-type-btn').forEach(btn => {
                btn.classList.remove('ring-4', 'ring-white', 'ring-opacity-50', 'scale-105');
            });
            
            document.getElementById('selectedWorkoutType').innerHTML = '<p class="text-gray-500 dark:text-gray-400">‚ú® Selecione um tipo de treino acima - Os exerc√≠cios ser√£o carregados automaticamente!</p>';
            document.getElementById('workoutFormContainer').style.display = 'none';
            
            showSuccessMessage('Formul√°rio limpo!');
        }

        // Form submission
        function handleFormSubmit(e) {
            e.preventDefault();
            console.log('üíæ Salvando treino...');
            
            const date = document.getElementById('workoutDate').value;
            if (!date) {
                alert('Por favor, selecione uma data para o treino!');
                return;
            }
            
            const exercises = [];
            const entries = document.querySelectorAll('.exercise-entry');
            
            entries.forEach(entry => {
                const exerciseName = entry.querySelector('.exercise-name')?.value || entry.querySelector('.exercise-select')?.value;
                const sets = parseInt(entry.querySelector('.sets').value) || 0;
                const reps = parseInt(entry.querySelector('.reps').value) || 0;
                const weight = parseFloat(entry.querySelector('.weight').value) || 0;
                
                if (exerciseName && sets > 0 && reps > 0) {
                    exercises.push({ exercise: exerciseName, sets, reps, weight });
                }
            });
            
            if (exercises.length === 0) {
                alert('Adicione pelo menos um exerc√≠cio ao treino!');
                return;
            }
            
            let duration = 30; // Default duration
            const durationDisplay = document.getElementById('workoutDurationDisplay').value;
            if (durationDisplay && durationDisplay.includes('minutos')) {
                duration = parseInt(durationDisplay.split(' ')[0]);
            }
            
            const workout = {
                id: Date.now(),
                date,
                duration,
                startTime: workoutStartTime ? workoutStartTime.toISOString() : new Date().toISOString(),
                exercises,
                totalWeight: exercises.reduce((sum, ex) => sum + (ex.weight * ex.sets * ex.reps), 0),
                type: selectedWorkoutType
            };
            
            workouts.push(workout);
            console.log('‚úÖ Treino salvo:', workout);
            
            showSuccessMessage('Treino salvo com sucesso! Parab√©ns! üèÜ');
            clearForm();
            updateDashboard();
            updateWorkoutHistory();
            
            // Reset workout timer state if needed
            if (isWorkoutRunning) {
                stopWorkout();
            }
        }

        // Update dashboard
        function updateDashboard() {
            console.log('üìä Atualizando dashboard...');
            
            // Calculate weekly workouts
            const now = new Date();
            const weekStart = new Date(now.setDate(now.getDate() - now.getDay()));
            const weeklyWorkouts = workouts.filter(w => new Date(w.date) >= weekStart).length;
            
            // Calculate totals
            const totalWeight = workouts.reduce((sum, w) => sum + w.totalWeight, 0);
            const uniqueExercises = new Set();
            workouts.forEach(w => {
                w.exercises.forEach(e => uniqueExercises.add(e.exercise));
            });
            
            // Update metrics
            document.getElementById('weeklyWorkouts').textContent = weeklyWorkouts;
            document.getElementById('totalVolume').textContent = totalWeight.toFixed(1);
            document.getElementById('totalWorkouts').textContent = workouts.length;
            document.getElementById('uniqueExercises').textContent = uniqueExercises.size;
            
            // Update recent workouts
            updateRecentWorkouts();
            updatePopularExercises();
        }

        function updateRecentWorkouts() {
            const container = document.getElementById('recentWorkouts');
            const recentWorkouts = workouts.slice(-5).reverse();
            
            if (recentWorkouts.length === 0) {
                container.innerHTML = '<p class="text-gray-500 dark:text-gray-400">Nenhum treino registrado ainda.</p>';
            } else {
                container.innerHTML = recentWorkouts.map(workout => `
                    <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                        <div>
                            <p class="font-medium">${new Date(workout.date).toLocaleDateString('pt-BR')}</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">${workout.exercises.length} exerc√≠cios ‚Ä¢ ${workout.duration}min</p>
                        </div>
                        <div class="text-right">
                            <p class="font-medium text-primary">${workout.totalWeight.toFixed(1)}kg</p>
                        </div>
                    </div>
                `).join('');
            }
        }

        function updatePopularExercises() {
            const exerciseCount = {};
            workouts.forEach(w => {
                w.exercises.forEach(e => {
                    exerciseCount[e.exercise] = (exerciseCount[e.exercise] || 0) + 1;
                });
            });
            
            const container = document.getElementById('popularExercises');
            const sortedExercises = Object.entries(exerciseCount)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5);
            
            if (sortedExercises.length === 0) {
                container.innerHTML = '<p class="text-gray-500 dark:text-gray-400">Nenhum exerc√≠cio registrado ainda.</p>';
            } else {
                container.innerHTML = sortedExercises.map(([exercise, count]) => `
                    <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                        <p class="font-medium">${exercise}</p>
                        <span class="bg-primary text-white px-2 py-1 rounded text-sm">${count}x</span>
                    </div>
                `).join('');
            }
        }

        // Workout history
        function updateWorkoutHistory() {
            const container = document.getElementById('workoutHistory');
            
            if (workouts.length === 0) {
                container.innerHTML = '<p class="text-gray-500 dark:text-gray-400 text-center py-8">Nenhum treino registrado ainda.</p>';
                return;
            }
            
            const sortedWorkouts = workouts.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            container.innerHTML = sortedWorkouts.map(workout => `
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold">${new Date(workout.date).toLocaleDateString('pt-BR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</h3>
                        <div class="text-right">
                            <p class="text-sm text-gray-600 dark:text-gray-400">Dura√ß√£o: ${workout.duration} min</p>
                            <p class="font-medium text-primary">Volume: ${workout.totalWeight.toFixed(1)}kg</p>
                            <button class="delete-workout text-red-500 hover:text-red-700 text-sm mt-1" data-id="${workout.id}">
                                <i class="fas fa-trash mr-1"></i>Excluir
                            </button>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        ${workout.exercises.map(exercise => `
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded">
                                <h4 class="font-medium mb-2">${exercise.exercise}</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                    ${exercise.sets} s√©ries √ó ${exercise.reps} reps
                                    ${exercise.weight > 0 ? ` @ ${exercise.weight}kg` : ''}
                                </p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
            
            // Add delete event listeners
            container.querySelectorAll('.delete-workout').forEach(btn => {
                btn.addEventListener('click', function() {
                    const workoutId = parseInt(this.dataset.id);
                    deleteWorkout(workoutId);
                });
            });
        }

        function deleteWorkout(workoutId) {
            if (confirm('Tem certeza que deseja excluir este treino?')) {
                workouts = workouts.filter(w => w.id !== workoutId);
                updateWorkoutHistory();
                updateDashboard();
                showSuccessMessage('Treino exclu√≠do com sucesso!');
            }
        }

        function clearHistory() {
            if (workouts.length === 0) {
                alert('N√£o h√° treinos para excluir.');
                return;
            }
            
            if (confirm('Tem certeza que deseja excluir TODOS os treinos?')) {
                workouts = [];
                updateWorkoutHistory();
                updateDashboard();
                showSuccessMessage('Hist√≥rico limpo com sucesso!');
            }
        }

        // Exercise list
        function populateExerciseList() {
            const container = document.getElementById('exerciseList');
            container.innerHTML = '';
            
            exerciseDatabase.forEach(exercise => {
                const card = document.createElement('div');
                card.className = 'bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer';
                card.innerHTML = `
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-semibold">${exercise.name}</h3>
                        <span class="bg-primary text-white px-2 py-1 rounded text-sm capitalize">${exercise.muscle}</span>
                    </div>
                    <p class="text-gray-600 dark:text-gray-400 text-sm">${exercise.instructions}</p>
                `;
                container.appendChild(card);
            });
        }

        // 1RM Calculator
        function calculate1RM() {
            const weight = parseFloat(document.getElementById('rmWeight').value);
            const reps = parseInt(document.getElementById('rmReps').value);
            
            if (!weight || !reps || reps < 1 || reps > 20) {
                alert('Por favor, insira valores v√°lidos (peso > 0 e repeti√ß√µes entre 1-20)');
                return;
            }
            
            // Brzycki formula: 1RM = weight √ó (36 / (37 - reps))
            const oneRM = weight * (36 / (37 - reps));
            
            document.getElementById('rmValue').textContent = `${oneRM.toFixed(1)}kg`;
            document.getElementById('rmResult').classList.remove('hidden');
        }

        // Utility functions
        function showSuccessMessage(message) {
            console.log('‚úÖ Success:', message);
            document.getElementById('successText').textContent = message;
            const successEl = document.getElementById('successMessage');
            successEl.classList.remove('hidden');
            setTimeout(() => {
                successEl.classList.add('hidden');
            }, 3000);
        }

        // Initialize empty state
        updateExerciseEmptyState();
        
        console.log('üéâ FitTracker Elite inicializado com sucesso!');
    </script>
</body>
</html>
